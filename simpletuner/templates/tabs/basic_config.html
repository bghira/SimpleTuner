<div class="tab-content active" id="basic-tab">
    <div class="config-card">
        <h5 class="card-title">
            <i class="fas fa-play-circle"></i> Basic Configuration
        </h5>
        <div class="row">
            <div class="col-md-6 mb-3">
                {{ render_field('job_id', 'Job ID', 'text', 'foobar123') }}
            </div>
            <div class="col-md-6 mb-3"
                 x-data="{
                     checkpoints: [],
                     loading: false,
                     async loadCheckpoints() {
                         this.loading = true;
                         try {
                             const env = Alpine.store('trainer')?.activeEnvironment || 'default';
                             const resp = await fetch(`/api/checkpoints/for-resume?environment=${env}`);
                             if (resp.ok) {
                                 const data = await resp.json();
                                 this.checkpoints = data.checkpoints || [];
                             }
                         } catch (error) {
                             console.error('Failed to load checkpoints:', error);
                         } finally {
                             this.loading = false;
                         }
                     }
                 }"
                 x-init="loadCheckpoints()"
                 @environment-changed.window="loadCheckpoints()">

                {% set resume_value = 'latest' %}
                {% if config is defined and config %}
                    {% set resume_value = config.get('--resume_from_checkpoint', config.get('resume_from_checkpoint', resume_value)) %}
                {% elif active_config is defined and active_config %}
                    {% set resume_value = active_config.get('--resume_from_checkpoint', active_config.get('resume_from_checkpoint', resume_value)) %}
                {% endif %}
                {% if resume_value is none %}
                    {% set resume_value = '' %}
                {% endif %}
                {% set resume_lower = (resume_value|string)|lower %}

                <label class="form-label" for="resume_from_checkpoint">
                    Resume From Checkpoint
                    <span class="text-muted small ms-2" x-show="loading">
                        <i class="fas fa-spinner fa-spin"></i> Loading...
                    </span>
                </label>

                <select name="--resume_from_checkpoint"
                        id="resume_from_checkpoint"
                        class="form-select"
                        x-bind:disabled="loading">
                    <option value="latest" {% if resume_lower == 'latest' %}selected{% endif %}>Latest checkpoint (automatic)</option>
                    <option value="" {% if resume_lower in ['', 'none'] %}selected{% endif %}>None (start from scratch)</option>
                    <template x-for="cp in checkpoints" :key="cp.name">
                        <option :value="cp.name"
                                x-text="`${cp.name} (step ${cp.step})`"></option>
                    </template>
                </select>

                <small class="form-text text-muted">
                    Select a checkpoint to resume training from, or "latest" to automatically use the most recent checkpoint
                </small>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12 mb-3">
                {{ render_field('--data_backend_config', 'Data Backend Config', 'text', 'config/multidatabackend.json') }}
            </div>
        </div>
    </div>
</div>
