<!-- Change Password Modal -->
<div class="modal fade" id="changePasswordModal" tabindex="-1" aria-labelledby="changePasswordModalLabel" aria-hidden="true"
     x-data="changePasswordComponent()" x-init="init()">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content bg-dark">
            <div class="modal-header border-secondary">
                <h5 class="modal-title" id="changePasswordModalLabel">
                    <i class="fas fa-lock me-2"></i>Change Password
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- Success Message -->
                <div x-show="success" x-cloak class="alert alert-success py-2">
                    <i class="fas fa-check-circle me-2"></i>Password changed successfully!
                </div>

                <!-- Password Form -->
                <form @submit.prevent="changePassword()" x-show="!success">
                    <!-- Current Password -->
                    <div class="mb-3">
                        <label class="form-label text-muted small">Current Password</label>
                        <input type="password" class="form-control form-control-sm"
                               x-model="currentPassword"
                               placeholder="Enter current password"
                               required
                               autocomplete="current-password">
                    </div>

                    <!-- New Password -->
                    <div class="mb-3">
                        <label class="form-label text-muted small">New Password</label>
                        <input type="password" class="form-control form-control-sm"
                               x-model="newPassword"
                               placeholder="Enter new password"
                               minlength="8"
                               required
                               autocomplete="new-password">
                        <small class="text-muted">Minimum 8 characters</small>
                    </div>

                    <!-- Confirm Password -->
                    <div class="mb-3">
                        <label class="form-label text-muted small">Confirm New Password</label>
                        <input type="password" class="form-control form-control-sm"
                               x-model="confirmPassword"
                               placeholder="Confirm new password"
                               required
                               autocomplete="new-password">
                    </div>

                    <!-- Error Message -->
                    <div x-show="error" x-cloak class="alert alert-danger py-2" x-text="error"></div>

                    <!-- Submit Button -->
                    <div class="d-grid">
                        <button type="submit" class="btn btn-primary" :disabled="saving">
                            <i class="fas" :class="saving ? 'fa-spinner fa-spin' : 'fa-save'"></i>
                            <span class="ms-1" x-text="saving ? 'Changing Password...' : 'Change Password'"></span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
